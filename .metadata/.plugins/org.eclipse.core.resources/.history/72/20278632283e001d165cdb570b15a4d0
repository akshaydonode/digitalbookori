package com.cts.digitalbook.digitalbookreaderservice.controllers;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.cts.digitalbook.digitalbookauthorservice.exceptions.DigitalBookException;
import com.cts.digitalbook.digitalbookbookservice.entities.BookEntity;
import com.cts.digitalbook.digitalbookreaderservice.dtos.ResponseDTO;
import com.cts.digitalbook.digitalbookreaderservice.entities.ReaderEntity;

@RestController
@RequestMapping("/reader")
@CrossOrigin
public class ReaderController {
	
	@PostMapping("/addReader")
	public ResponseDTO addReader(@RequestBody ReaderEntity readerEntity) {
		ResponseDTO responseDto = new ResponseDTO();

		try {
			BookEntity bookEntity2 = bookService.createBookByAuthor(authorId, image, bookEntity);
			responseDto.setResult(bookEntity2);
			responseDto.setMessage("Book Created Successfully.");
		} catch (DigitalBookException e) {
			responseDto.setException(e.getMessage());
		}

		return responseDto;
	}

}
